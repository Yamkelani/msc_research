<<<<<<< HEAD
base_path = "C:\Users\yamzi\source_code\msc_research\rul_prediction\src\datasets\";
solar_rad_path_21 = "weather-2021.csv";
solar_rad_path_22 = "2022.csv";
=======
base_path = "C:\Users\yamzi\OneDrive\Documents\Master in Science Research\Battery life prediction\data\weather_data\";
solar_rad_path_21 = "weather_data_2021.csv";
solar_rad_path_22 = "weather_data_2022.csv";
>>>>>>> e0e733d7a153902139992e7e4b410e29c9eab237

solar_rad_2021 = readtable(base_path+solar_rad_path_21);
solar_rad_2022 = readtable(base_path+solar_rad_path_22);

solar_rad_2021['Month'] = month()


%Energy losses
inverter_losses = 0.08;			
temperature_losses = 0.08;			
dc_cables_losses = 0.02;			
ac_cables_losses = 0.02;			
shadings =  0.03;			
losses_weak_irradiation = 0.03;			
losses_due_to_dust= 0.02;

pr_losses = (1-inverter_losses)*(1-temperature_losses)*(1-dc_cables_losses)*(1-ac_cables_losses)*(1-shadings)*(1-losses_due_to_dust)*(1-losses_weak_irradiation);
solar_panel_area = 20;
solar_panel_yield = 0.15;
energy_const = solar_panel_yield * solar_panel_area * pr_losses

<<<<<<< HEAD
energy_data_2021 = solar_rad_2021(:,[1,2]);
energy_data_2022 = solar_rad_2022(:,[1,2]);

%Calculate energy
energy_data_2021.solar_energy = energy_data_2021.CS320_SlrW_Avg * energy_const;
energy_data_2022.solar_energy = energy_data_2022.CS320_SlrW_Avg * energy_const;

disp("The calculated solar energy for the year 2021 is.")
disp(head(energy_data_2021,10))

disp("The calculated solar energy for the year 2022 is.")
disp(head(energy_data_2022,10))


plot(energy_data_2021.Timestamp_UTC_0_, energy_data_2021.solar_energy), 
=======
solar_data_2021 = solar_rad_2021(:,[1,4,5]);
solar_data_2022 = solar_rad_2022(:,[1,2,3]);

%Calculate energy
solar_data_2021.solar_energy = solar_data_2021.Solar_irradiation * energy_const;
solar_data_2022.solar_energy = solar_data_2022.Solar_irradiation * energy_const;
solar_data_2021.month = month(solar_data_2021.Timestamp_UTC_0_, 'name')
solar_data_2022.month = month(solar_data_2022.Timestamp_UTC_0_, 'name')
solar_data_2021.Date = datetime(solar_data_2021.Timestamp_UTC_0_)
solar_data_2022.Date = datetime(solar_data_2022.Timestamp_UTC_0_)
solar_data_2021.Date.Format = "default" 
solar_data_2022.Date.Format = "default" 
solar_data_2021 = convertvars(solar_data_2021,["Date"],"categorical")
group_data = groupsummary(solar_data_2021,'Date','mean','Solar_irradiation')
disp("The calculated solar energy for the year 2021 is.")
disp(head(solar_data_2021,10))

disp("The calculated solar energy for the year 2022 is.")
disp(head(solar_data_2022,10))


plot(solar_data_2021.Timestamp_UTC_0_ ,solar_data_2021.solar_energy), 
>>>>>>> e0e733d7a153902139992e7e4b410e29c9eab237
legend('Enegry genrated')
xlabel('Time'), ylabel('Solar ouput energy (kWh')
title('Solar energy generated by the panles for the year 2021.')

<<<<<<< HEAD
=======
plot(solar_data_2022.Timestamp_UTC_0_ ,solar_data_2022.solar_energy), 
legend('Energy genrated')
xlabel('Time'), ylabel('Solar ouput energy (kWh')
title('Solar energy generated by the panles for the year 2022.')

>>>>>>> e0e733d7a153902139992e7e4b410e29c9eab237
